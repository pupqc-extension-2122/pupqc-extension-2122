<%# ***** Body ***** %>

<div class="login-box">
  <div class="login-logo">
    <img src="<%=BASE_URL%>/img/app/change_pass.svg" alt="PUP Logo" style="width: 10rem;" draggable="false">
  </div>
  <div class="login-card-body">
    <div class="text-center mb-4">
      <h2 class="text-dark">Update your password</h2>
      <div>Please update your password before you proceed.</div>
    </div>

    <form id="updatePassword_form">

      <%# Password %>
      <div class="form-group mb-2">
        <label for="updatePassword_password">
          <span>Your password</span>
          <span class="text-danger">*</span>
        </label>
        <div class="input-group">
          <input 
            type="password" 
            class="form-control" 
            id="updatePassword_password" 
            name="password" 
            placeholder="Type your password here"
            autocomplete="false"
          >
          <div class="input-group-append">
            <div class="input-group-text">
              <span class="fas fa-lock"></span>
            </div>
          </div>
        </div>
      </div>

      <%# Password Strength %>
      <div class="form-group">
        <div class="progress progress-sm">
          <div 
            class="progress-bar bg-success" 
            id="passwordStrength_progressBar"
            role="progressbar" 
            aria-valuenow="0" 
            aria-valuemin="0" 
            aria-valuemax="100" 
            style="width: 0%"
          >
          </div>
        </div>
        <div class="small" id="passwordStrength_label">
          <div class="text-muted font-italic">We will check how strong your password is</div>
        </div>
      </div>


      <%# Confirm Password %>
      <div class="form-group">
        <label for="updatePassword_confirmPassword">
          <span>Retype password to confirm</span>
          <span class="text-danger">*</span>
        </label>
        <div class="input-group">
          <input 
            type="password" 
            class="form-control" 
            id="updatePassword_confirmPassword" 
            name="confirm_password" 
            placeholder="Type again your password here"
            autocomplete="false"
          >
          <div class="input-group-append">
            <div class="input-group-text">
              <span class="fas fa-lock"></span>
            </div>
          </div>
        </div>
      </div>

      <div class="form-group mt-3 text-center">
        
        <%# Save my password button %>
        <button 
          type="submit" 
          class="btn btn-primary btn-block" 
          id="updatePassword_saveBtn"
        >
          <span>Save my password</span>
        </button>

        <%# Logout instead %>
        <button 
          type="button" 
          class="btn btn-negative btn-block text-primary" 
          id="updatePassword_logoutBtn"
        >Logout instead</button>
      </div>

    </form>
  </div>
</div>


<div class="modal user-select-none" id="confirmLogout_modal">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-body py-5">
        <div class="text-center">
          <h1 class="display-3">
            <i class="fas fa-question-circle text-info"></i>
          </h1>
          <div class="px-3 px-md-5">
            <h3>Logout instead?</h3>
            <div>If you continue, your one-time password can not be used again and you need to request a change in your password by clicking "forgot password" when you log in.</div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button 
          type="button" 
          class="btn btn-outline-primary" 
          id="confirmLogout_btn"
        >I understand and continue</button>
        <button 
          type="button" 
          data-dismiss="modal"
          class="btn btn-negative" 
          id="cancelLogout_btn"
        >Cancel</button>
      </div>
    </div>
  </div>
</div>


<%# ***** Script ***** %>

<%# Main %> 
<script src="<%=BASE_URL%>/js/main.js"></script>
<script src="<%=BASE_URL%>/js/auth/user.js"></script>
<script src="<%=BASE_URL%>/js/auth/change_password.js"></script>
